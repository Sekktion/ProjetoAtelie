<!DOCTYPE html>
    <html lang="pt-br">
        <head>
            <meta charset="UTF-8">
            <title> Atelie - Home </title>
            <link rel="stylesheet" type="text/css" href="_css/style.css">
            <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css">
            <link rel="shortcut icon" href="_imagens/logo.ico" type="image/x-icon">


            <!-- SCRIPTS PARA A FUNCIONALIDADE DAS IMAGENS ARRASTÁVEIS -->

            <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
            <script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"></script>
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css">  

        </head>
        <header class="home_home">
           <nav class="header-nav">           
            <ul style="text-align: right;">
                <li><a href="/anunciar">anunciar</a></li>
            </ul>
        </nav>
        </header>
        <body onload="criaSlideshow()">
            <div id="principal">            <!-- DIV COM O CONTEÚDO PRINCIPAL E AS FORMATAÇÕES -->
                <br>
                <div class="slider-principal">
                    <div><img src="_imagens/oferta 1.png"></div>
                    <div><img src="_imagens/oferta 2.png"></div>
                </div>
                <div class="conteudo">
                        <nav class="tipos">
                        <ul>
                            <li><a href="/vestidos?model=sereia">SEREIA</a></li>
                            <li><a href="/vestidos?model=semisereia">SEMI-SEREIA</a></li>
                            <li><a href="/vestidos?model=reto">RETA</a></li>
                            <li><a href="/vestidos?model=evase">EVASÊ</a></li>
                            <li><a href="/vestidos?model=princesa">PRINCESA</a></li>
                        </ul>
                        </nav>
                        <div class="slider owl-carousel" id="slideshow">

                            <script> //Script para criar dinamicamente os cards
                                function criaSlideshow() {
                                    const slideshow = document.getElementById('slideshow')
                                    $.ajax({
                                            method: "GET",
                                            url: "http://localhost:3000/produtos",
                                            dataType: 'json',
                                            contentType: 'application/json'
                                    }).done((response) => {
                                        var i = 0
                                        var k = 3
                                        if (response.length < 3)
                                            k = response.length
                                        while (i < k) {
                                            criaCard(response[i], slideshow)
                                            i++
                                        }
                                    })
                                }
                                function criaCard(dadosProduto, divSlideshow) {
                                    var divCard = document.createElement('div')
                                    var divImagem = document.createElement('div')
                                    var imagem = document.createElement('img')
                                    var divContent = document.createElement('div')
                                    var divTitle = document.createElement('div')
                                    var divSubTitle = document.createElement('div')
                                    var descricao = document.createElement('p')
                                    var divBotao = document.createElement('div')
                                    var botaoVerMais = document.createElement('button')
                                    var linkProduto = document.createElement('a')
                
                                    linkProduto.setAttribute('href', 'http://localhost:3000/produto?id=' + dadosProduto._id)
                                    divCard.setAttribute('class', 'card')
                                    divImagem.setAttribute('class', 'img')
                                    imagem.setAttribute('src', 'http://localhost:3000/produto/' + dadosProduto._id + '/foto')
                                    imagem.setAttribute('alt', '')
                                    divContent.setAttribute('class', 'content')
                                    divTitle.setAttribute('class', 'title')
                                    divSubTitle.setAttribute('class', 'sub-title')
                                    divBotao.setAttribute('class', 'btn')
                                    botaoVerMais.setAttribute('class', 'btnvermais')
                
                                    divTitle.innerHTML = 'Vestido ' + dadosProduto.modelo
                                    divSubTitle.innerHTML = dadosProduto.cor
                                    descricao.innerHTML = dadosProduto.description
                                    botaoVerMais.innerHTML = 'Ver mais'
                
                                    linkProduto.appendChild(botaoVerMais)
                                    divBotao.appendChild(linkProduto)
                                    divContent.appendChild(divTitle)
                                    divContent.appendChild(divSubTitle)
                                    divContent.appendChild(descricao)
                                    divContent.appendChild(divBotao)
                                    divImagem.appendChild(imagem)
                                    divCard.appendChild(divImagem)
                                    divCard.appendChild(divContent)
                                    slideshow.appendChild(divCard)
                                }
                            </script>

                        </div>
                        <script>         //SLIDER PARA AS IMAGENS PASSAREM PARA O LADO
                            $(".slider").owlCarousel({
                                loop: true,
                                autoplay: true,
                                autoplayTimeout: 2000, //2000ms = 2s;
                                autoplayHoverPause: true,
                            });
                        </script> 
                        
                </div>

                    <!-- SCRIPTS PARA FUNCIONALIDADE DOS LAYOUTS ANIMADOS -->
                            
                <script type="text/javascript" src="https://code.jquery.com/jquery-1.11.0.min.js"></script>
                <script type="text/javascript" src="https://code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
                <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js"></script>
                <script src="https://kit.fontawesome.com/a076d05399.js"></script>
                <script type="text/javascript" src="_js/main.js"></script>
            
            <footer>            <!-- RODAPÉ COM CONTATOS E COPYRIGHT -->
               <p> Copyright &copy; 2020 / CONTATO: (12) 3456-7890<br>
                <a href="#"><img src="_imagens/face.png" height="20" width="20"></a> 
                <a href="#"><img src="_imagens/insta.png" height="20" width="20"></a>
            </p> 
            </footer>
            </div>
        </body>
    </html>
</DOCTYPE>